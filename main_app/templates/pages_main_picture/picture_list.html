<!DOCTYPE html>
{% load static %}
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–ª—å–±–æ–º—ã</title>
    <!-- Bootstrap CSS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome –¥–ª—è –∏–∫–æ–Ω–æ–∫ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/main_picture/picture.css' %}">
    <link rel="stylesheet" href="{% static 'css/main_pagefile/mainpage.css' %}">
    <link rel="stylesheet" href="{% static 'css/biography/biography.css' %}">
</head>
<body>
    <!-- –ù–∞–≤–±–∞—Ä -->
    <nav class="navbar navbar-expand-lg sticky-top custom-navbar">
        <div class="container">
            <a class="navbar-brand" href="#">ùìêùìµùì≤ùìºùì±ùìÆùìª ùìúùì≤ùìªùîÉùì∏</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'home' %}">–ì–ª–∞–≤–Ω–∞—è</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'biography' %}">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'album_list' %}">–ê–ª—å–±–æ–º—ã –∏ –∫–∞—Ç–∞–ª–æ–≥–∏</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'book_list' %}">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'news_list' %}">–ù–æ–≤–æ—Å—Ç–∏</a>
                    </li>

                </ul>

                {% if request.user.is_authenticated %}
                <div class="d-flex align-items-center">
                    <div class="dropdown">
                        <a href="#" class="d-flex align-items-center user-dropdown-toggle dropdown-toggle"
                            id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                            <span class="navbar-text text-white">{{ request.user.username }}</span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li><a class="dropdown-item" href="{% url 'account' %}"><i class="bi bi-person me-2"></i>–ü—Ä–æ—Ñ–∏–ª—å</a></li>
                            <li><a class="dropdown-item" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-2"></i>–í—ã–π—Ç–∏</a></li>
                        </ul>
                    </div>
                </div>
                {% else %}
                <div class="d-flex gap-2">
                    <a href="{% url 'login' %}" class="btn custom-main-button"><i class="bi bi-person-plus me-1"></i>–í–æ–π—Ç–∏</a>
                    <a href="{% url 'register' %}" class="btn custom-main-button"><i class="bi bi-person-plus me-1"></i>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                </div>
                {% endif %}

            </div>
        </div>
    </nav>

<!--d-->
<div class="bio-block">
        <h1 class="article-title">–ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ ‚Äî –ë–∏–æ–≥—Ä–∞—Ñ–∏—è</h1>

        <div class="image-float">
            <img src="{% static 'images/picture.jpg' %}" alt="–ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ" class="artist-photo">
        </div>
        <p>
            –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ —Ä–æ–¥–∏–ª—Å—è –≤ 1948 –≥–æ–¥—É –≤ –≥–æ—Ä–æ–¥–µ –¢–∞—à–∫–µ–Ω—Ç. –£–∂–µ –≤ —à–∫–æ–ª—å–Ω—ã–µ –≥–æ–¥—ã —É –Ω–µ–≥–æ –ø—Ä–æ—è–≤–∏–ª—Å—è –∏–Ω—Ç–µ—Ä–µ—Å –∫ –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ–º—É –∏—Å–∫—É—Å—Å—Ç–≤—É. –° —Ä–∞–Ω–Ω–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞ –æ–Ω —Å–¥–µ–ª–∞–ª –∏—Å–∫—É—Å—Å—Ç–≤–æ –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º–æ–π —á–∞—Å—Ç—å—é —Å–≤–æ–µ–π –∂–∏–∑–Ω–∏.
            –ü–æ—Å–ª–µ –æ–∫–æ–Ω—á–∞–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–π —à–∫–æ–ª—ã –æ–Ω –ø–æ—Å—Ç—É–ø–∏–ª –≤ –†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–æ–µ —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —É—á–∏–ª–∏—â–µ –∏–º–µ–Ω–∏ –ü.–ü. –ë–µ–Ω—å–∫–æ–≤–∞, –≥–¥–µ –ø–æ–¥ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ–º –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞ –ê.–ü.–ü–µ—Ä–æ–≤–∞ –æ–≤–ª–∞–¥–µ–ª —Ç–æ–Ω–∫–æ—Å—Ç—è–º–∏ –∂–∏–≤–æ–ø–∏—Å–∏.
            –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ —É—á—ë–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏–ª –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ –ú–æ—Å–∫–æ–≤—Å–∫–æ–º –≥–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–º —Ö—É–¥–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–º –∏–Ω—Å—Ç–∏—Ç—É—Ç–µ –∏–º–µ–Ω–∏ –í.–ò.–°—É—Ä–∏–∫–æ–≤–∞, –≥–¥–µ –æ–±—É—á–∞–ª—Å—è —É —Ç–∞–∫–∏—Ö –≤—ã–¥–∞—é—â–∏—Ö—Å—è –º–∞—Å—Ç–µ—Ä–æ–≤, –∫–∞–∫ –î.–î.–ñ–∏–ª–∏–Ω—Å–∫–∏–π –∏ –ê.–ú.–ì—Ä–∏—Ü–∞–π.
            –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ ‚Äì —Ö—É–¥–æ–∂–Ω–∏–∫, —Ä–∞–±–æ—Ç–∞—é—â–∏–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤–æ –≤—Å–µ—Ö –∂–∞–Ω—Ä–∞—Ö. –°–≤–æ–∏ —Ä–∞–Ω–Ω–∏–µ –ø–æ—Ä—Ç—Ä–µ—Ç—ã, –ø–µ–π–∑–∞–∂–∏, –Ω–∞—Ç—é—Ä–º–æ—Ä—Ç—ã, –±—ã—Ç–æ–≤—ã–µ –∫–∞—Ä—Ç–∏–Ω—ã —Ö—É–¥–æ–∂–Ω–∏–∫ —Å–æ–∑–¥–∞–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –ø–æ—á–µ—Ä–ø–Ω—É—Ç–æ–≥–æ –∏–∑ –∂–∏–∑–Ω–∏ —É–∑–±–µ–∫—Å–∫–æ–≥–æ –Ω–∞—Ä–æ–¥–∞. –ö—Å—Ç–∞—Ç–∏, —ç—Ç–æ—Ç –ø—Ä–∏–Ω—Ü–∏–ø —É –Ω–µ–≥–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ.
        </p>
        <p>
            –ü–æ–º–∏–º–æ —Ç–≤–æ—Ä—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏—è —Ç—Ä–∞–¥–∏—Ü–∏–π –∏—Å–∫—É—Å—Å—Ç–≤–∞, –Ω–µ–ª—å–∑—è –Ω–µ –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ –Ω–µ—Ä–∞–∑—Ä—ã–≤–Ω—ã–º–∏ –Ω–∏—Ç—è–º–∏ —Å–≤—è–∑–∞–Ω —Å —Ä–æ–¥–Ω–æ–π –∑–µ–º–ª–µ–π, –∂–∏–∑–Ω—å—é —Å–≤–æ–µ–≥–æ –Ω–∞—Ä–æ–¥–∞, –µ–≥–æ –æ–±—ã—á–∞—è–º–∏ –∏ –æ–±—Ä—è–¥–∞–º–∏.
            –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –≤—ã—Å—Ç–∞–≤–∫–∏ –ê–ª–∏—à–µ—Ä–∞ –ú–∏—Ä–∑–æ —Å 1977 –≥–æ–¥–∞ –∏ –ø–æ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ –≤ —Å–∞–º—ã—Ö —Ä–∞–∑–≤–∏—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö –º–∏—Ä–∞ ‚Äì –°–®–ê, –ì–µ—Ä–º–∞–Ω–∏–∏, –§—Ä–∞–Ω—Ü–∏–∏, –ë–µ–ª—å–≥–∏–∏, –ò—Ç–∞–ª–∏–∏, –ù–æ—Ä–≤–µ–≥–∏–∏, –†–æ—Å—Å–∏–∏, –ë–æ–ª–≥–∞—Ä–∏–∏, –Æ–≥–æ—Å–ª–∞–≤–∏–∏, –ò–Ω–¥–∏–∏, –°–∏—Ä–∏–∏, –ö–æ—Ä–µ–µ, –õ–∏—Ç–≤–µ –∏ –≤ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–µ. –≠—Ç–∏ –≤—ã—Å—Ç–∞–≤–∫–∏ –±—ã–ª–∏ –≤—ã—Å–æ–∫–æ –æ—Ü–µ–Ω–µ–Ω—ã –ª—é–±–∏—Ç–µ–ª—è–º–∏ –∏–∑–æ–±—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞.
            –ú–Ω–æ–≥–∏–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è —Ö—É–¥–æ–∂–Ω–∏–∫–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º—É–∑–µ—è—Ö, –≥–∞–ª–µ—Ä–µ—è—Ö –∏ —á–∞—Å—Ç–Ω—ã—Ö –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.
            –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ —Ç–∞–∫–∂–µ –ø—Ä–æ—è–≤–∏–ª —Å–µ–±—è –∫–∞–∫ –ø–∏—Å–∞—Ç–µ–ª—å. –û–Ω —è–≤–ª—è–µ—Ç—Å—è —á–ª–µ–Ω–æ–º –°–æ—é–∑–∞ –ø–∏—Å–∞—Ç–µ–ª–µ–π –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞. –í 2015 –≥–æ–¥—É –±—ã–ª –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω –µ–≥–æ –ø–µ—Ä–≤—ã–π —Ä–æ–º–∞–Ω ‚Äì ¬´–ö–∞–ª–ª–∞—Ö–æ–Ω–∞–ª–∏–∫ –π–∏–≥–∏—Ç—á–∞¬ª (¬´–ü–∞—Ä–µ–Ω—ë–∫ –∏–∑ –ö–∞–ª–ª–∞—Ö–æ–Ω–∞¬ª), –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —É–¥–æ—Å—Ç–æ–µ–Ω –∑–≤–∞–Ω–∏—è ¬´–õ—É—á—à–∏–π —Ä–æ–º–∞–Ω –≥–æ–¥–∞¬ª.
            –í 2016 –≥–æ–¥—É –±—ã–ª –∏–∑–¥–∞–Ω –µ–≥–æ —Ä–æ–º–∞–Ω ¬´–ú—É—Å–∞–≤–≤–∏—Ä¬ª (¬´–•—É–¥–æ–∂–Ω–∏–∫¬ª), –∞ –≤ 2021 –≥–æ–¥—É ‚Äì ¬´–ó–∏—ë–ª–∏–ª–∞—Ä –±–∞–∑–º–∏¬ª (¬´–í–µ—á–µ—Ä –∏–Ω—Ç–µ–ª–ª–∏–≥–µ–Ω—Ü–∏–∏¬ª). –í 2024 –≥–æ–¥—É —á–∏—Ç–∞—Ç–µ–ª—è–º –±—ã–ª–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –µ–≥–æ –ø–æ–≤–µ—Å—Ç—å ¬´–û–Ω–∞–≥–∏–Ω–∞–º¬ª (¬´–ú–æ—è –º–∞–º–æ—á–∫–∞¬ª).
            –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º, –∏–¥–µ–π–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –∏ —Å–∞–º–æ–±—ã—Ç–Ω—ã–π —Å—Ç–∏–ª—å —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –ê–ª–∏—à–µ—Ä–∞ –ú–∏—Ä–∑–æ –±—ã–ª–∏ –≤—ã—Å–æ–∫–æ –æ—Ü–µ–Ω–µ–Ω—ã, –∏ –æ–Ω —É–¥–æ—Å—Ç–æ–µ–Ω –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∑–≤–∞–Ω–∏–π –∏ –Ω–∞–≥—Ä–∞–¥.
            –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ —è–≤–ª—è–µ—Ç—Å—è –∞–∫–∞–¥–µ–º–∏–∫–æ–º –ê–∫–∞–¥–µ–º–∏–∏ —Ö—É–¥–æ–∂–µ—Å—Ç–≤ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞, –ø–æ—á—ë—Ç–Ω—ã–º –∞–∫–∞–¥–µ–º–∏–∫–æ–º –†–æ—Å—Å–∏–π—Å–∫–æ–π –∞–∫–∞–¥–µ–º–∏–∏ —Ö—É–¥–æ–∂–µ—Å—Ç–≤, –ù–∞—Ä–æ–¥–Ω—ã–º —Ö—É–¥–æ–∂–Ω–∏–∫–æ–º –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–∞, –∫–∞–≤–∞–ª–µ—Ä–æ–º –æ—Ä–¥–µ–Ω–∞ ¬´–≠–ª-—é—Ä—Ç “≥—É—Ä–º–∞—Ç–∏¬ª –∏ –ª–∞—É—Ä–µ–∞—Ç–æ–º –ì–æ—Å—É–¥–∞—Ä—Å—Ç–≤–µ–Ω–Ω–æ–π –ø—Ä–µ–º–∏–∏ –†–µ—Å–ø—É–±–ª–∏–∫–∏ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω.
        </p>
    </div>

    <!-- picture_list.html -->
<div class="container py-4">
    <h1 class="mb-4">–ö–∞—Ä—Ç–∏–Ω—ã</h1>
  <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–∞—Ä—Ç–∏–Ω -->
  <div class="row g-4" id="picture-grid">
    {% for picture in pictures %}
    <div class="col-md-4">
      <div class="card shadow-sm h-100">
        <img src="{{ picture.picture.url }}" class="card-img-top" style="height: 200px; object-fit: cover;">
        <div class="card-body">
          <h5 class="card-title">{{ picture.title }}</h5>
          <div class="d-flex justify-content-between align-items-center">
            <button class="btn btn-sm btn-outline-primary view-details"
                    data-bs-toggle="collapse"
                    href="#picture-{{ picture.id }}">
              –ü–æ–¥—Ä–æ–±–Ω–µ–µ
            </button>
            <button class="btn btn-sm like-picture {% if request.user in picture.likes.all %}text-danger{% else %}text-muted{% endif %}"
                    data-picture-id="{{ picture.id }}">
              <i class="bi bi-heart{% if request.user in picture.likes.all %}-fill{% endif %}"></i>
              <span class="like-count">{{ picture.like_count }}</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>

  <!-- –î–µ—Ç–∞–ª–∏ –∫–∞—Ä—Ç–∏–Ω -->
  {% for picture in pictures %}
  <div class="collapse mt-4" id="picture-{{ picture.id }}" data-bs-parent="#picture-grid">
    <div class="card shadow">
      <div class="row g-0">
        <div class="col-md-6">
          <img src="{{ picture.picture.url }}" class="img-fluid rounded-start" style="max-height: 500px;">
        </div>
        <div class="col-md-6">
          <div class="card-body">
            <h3>{{ picture.title }}</h3>
            <p class="text-muted">{{ picture.style }} ¬∑ {{ picture.date_made|date:"Y" }}</p>
            <p>{{ picture.description_photo }}</p>

            <!-- –õ–∞–π–∫–∏ -->
            <button class="btn like-picture {% if request.user in picture.likes.all %}text-danger{% else %}text-muted{% endif %}"
                    data-picture-id="{{ picture.id }}">
              <i class="bi bi-heart{% if request.user in picture.likes.all %}-fill{% endif %}"></i>
              <span class="like-count">{{ picture.like_count }}</span> –ª–∞–π–∫–æ–≤
            </button>

            <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
            <div class="mt-4">
              <h5>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h5>
              <div class="comments-container">
                {% for comment in picture.commentses.all %}
                <div class="card mb-2" id="comment-{{ comment.id }}">
                  <div class="card-body p-2">
                    <div class="d-flex justify-content-between">
                      <strong>{{ comment.author.username }}</strong>
                      {% if comment.author == request.user %}
                      <div>
                        <button class="btn btn-sm btn-outline-secondary edit-comment"
                                data-comment-id="{{ comment.id }}">‚úèÔ∏è</button>
                        <button class="btn btn-sm btn-outline-danger delete-comment"
                                data-comment-id="{{ comment.id }}">üóëÔ∏è</button>
                      </div>
                      {% endif %}
                    </div>
                    <p class="mb-1 comment-text">{{ comment.text }}</p>
                    <small class="text-muted">
                      <button class="btn btn-sm like-comment {% if request.user in comment.likes.all %}text-danger{% else %}text-muted{% endif %}"
                              data-comment-id="{{ comment.id }}">
                        <i class="bi bi-heart{% if request.user in comment.likes.all %}-fill{% endif %}"></i>
                        <span class="like-count">{{ comment.like_count }}</span>
                      </button>
                    </small>
                  </div>
                </div>
                {% endfor %}
              </div>

              <!-- –§–æ—Ä–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è -->
              <form class="mt-3 add-comment-form" data-picture-id="{{ picture.id }}">
                {% csrf_token %}
                <div class="input-group">
                  <input type="text" name="text" class="form-control" placeholder="–í–∞—à –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π" required>
                  <button class="btn btn-primary" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<script>
// –ü–æ–ª—É—á–µ–Ω–∏–µ CSRF-—Ç–æ–∫–µ–Ω–∞ –∏–∑ cookie
function getCookie(name) {
  let cookieValue = null;
  if (document.cookie && document.cookie !== '') {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
      const cookie = cookies[i].trim();
      if (cookie.substring(0, name.length + 1) === (name + '=')) {
        cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
        break;
      }
    }
  }
  return cookieValue;
}
const csrftoken = getCookie('csrftoken');

// –õ–∞–π–∫–∏ –∫–∞—Ä—Ç–∏–Ω
document.querySelectorAll('.like-picture').forEach(btn => {
  btn.addEventListener('click', async function () {
    const pictureId = this.dataset.pictureId;
    const response = await fetch(`/picture/${pictureId}/like/`, {
      method: 'POST',
      headers: {'X-CSRFToken': csrftoken},
    });

    if (!response.ok) return;

    const data = await response.json();
    document.querySelectorAll(`.like-picture[data-picture-id="${pictureId}"]`).forEach(el => {
      el.classList.toggle('text-danger', data.liked);
      el.classList.toggle('text-muted', !data.liked);
      el.innerHTML = `<i class="bi bi-heart${data.liked ? '-fill' : ''}"></i> <span class="like-count">${data.likes_count}</span>`;
    });
  });
});

// –õ–∞–π–∫–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
document.querySelectorAll('.like-comment').forEach(btn => {
  btn.addEventListener('click', async function () {
    const commentId = this.dataset.commentId;
    const response = await fetch(`/picture/comment/${commentId}/like/`, {
      method: 'POST',
      headers: {'X-CSRFToken': csrftoken},
    });

    if (!response.ok) return;

    const data = await response.json();
    this.classList.toggle('text-danger', data.liked);
    this.classList.toggle('text-muted', !data.liked);
    this.innerHTML = `<i class="bi bi-heart${data.liked ? '-fill' : ''}"></i> <span class="like-count">${data.likes_count}</span>`;
  });
});

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
document.querySelectorAll('.add-comment-form').forEach(form => {
  form.addEventListener('submit', async function (e) {
    e.preventDefault();
    const pictureId = this.dataset.pictureId;
    const formData = new FormData(this);

    const response = await fetch(`/add_comment_picture/${pictureId}/`, {
      method: 'POST',
      body: formData,
      headers: {'X-CSRFToken': csrftoken},
    });

    if (response.ok) {
      location.reload(); // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
    }
  });
});

// –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
document.querySelectorAll('.delete-comment').forEach(btn => {
  btn.addEventListener('click', async function () {
    if (confirm('–£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π?')) {
      const commentId = this.dataset.commentId;
      const response = await fetch(`/delete_comment_picture/${commentId}/`, {
        method: 'POST',
        headers: {'X-CSRFToken': csrftoken},
      });
      if (response.ok) {
        location.reload();
      }
    }
  });
});
// –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
document.querySelectorAll('.edit-comment').forEach(btn => {
  btn.addEventListener('click', function () {
    const commentId = this.dataset.commentId;
    const commentCard = document.getElementById(`comment-${commentId}`);
    const commentTextElem = commentCard.querySelector('.comment-text');
    const originalText = commentTextElem.textContent.trim();

    // –£–∂–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è ‚Äî –Ω–µ –¥—É–±–ª–∏—Ä—É–π
    if (commentCard.querySelector('.edit-form')) return;

    // –°–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç
    commentTextElem.style.display = 'none';

    // –í—Å—Ç–∞–≤–∫–∞ —Ñ–æ—Ä–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    const form = document.createElement('form');
    form.className = 'edit-form input-group mt-2';
    form.innerHTML = `
      <input type="text" name="text" class="form-control" value="${originalText}" required>
      <button class="btn btn-success" type="submit">üíæ</button>
      <button class="btn btn-secondary cancel-edit" type="button">‚úñÔ∏è</button>
    `;
    commentTextElem.after(form);

    // –û—Ç–º–µ–Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    form.querySelector('.cancel-edit').addEventListener('click', () => {
      form.remove();
      commentTextElem.style.display = '';
    });

    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏
    form.addEventListener('submit', async function (e) {
      e.preventDefault();
      const newText = form.querySelector('input[name="text"]').value;

      const response = await fetch(`/update_comment_picture/${commentId}/`, {
        method: 'POST',
        headers: {
          'X-CSRFToken': csrftoken,
          'Content-Type': 'application/x-www-form-urlencoded'
        },
        body: new URLSearchParams({ text: newText })
      });

      if (response.ok) {
        location.reload(); // –ò–ª–∏ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –±–µ–∑ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
      }
    });
  });
});

</script>

    <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ —Ñ–æ—Ä–º–∞ -->
    <section class="py-5 warm-background">
        <div class="container">
            <div class="row">
                <!-- –ö–æ–Ω—Ç–∞–∫—Ç—ã -->
                <div class="col-md-6">
                    <h2 class="mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
                    <p><i class="fas fa-envelope me-2"></i> artist@example.com</p>
                    <p><i class="fas fa-phone me-2"></i> +1 (234) 567-89-00</p>
                    <div class="mt-4">
                        <h5>–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏:</h5>
                        <a href="https://www.instagram.com/alishermirzo_artist?igsh=MXE3d2ozbzY1MDB6eg==" class="btn btn-outline-dark me-2">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="https://www.facebook.com/share/16hyYqLerk/?mibextid=wwXIfr" class="btn btn-outline-dark me-2">
                            <i class="fab fa-facebook"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="py-5 custom-footer">
        <div class="container">
            <div class="row g-4">
                <div class="col-lg-4">
                    <h5 class="mb-4">–ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ</h5>
                    <p>–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–∞–π—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—É–¥–æ–∂–Ω–∏–∫–∞ –∏ –º—ã—Å–ª–∏—Ç–µ–ª—è. –ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–µ, –∫–∞—Ä—Ç–∏–Ω–∞—Ö, –∞–ª—å–±–æ–º–∞—Ö –∏ –∫–Ω–∏–≥–∞—Ö –∞–≤—Ç–æ—Ä–∞.</p>
                    <div class="social-links mt-3">
                        <a href="https://www.instagram.com/alishermirzo_artist?igsh=MXE3d2ozbzY1MDB6eg==" class="text-white me-3"><i class="bi bi-instagram"></i></a>
                        <a href="https://www.facebook.com/share/16hyYqLerk/?mibextid=wwXIfr" class="text-white me-3"><i class="bi bi-facebook"></i></a>
                    </div>
                </div>
                <div class="col-lg-2 col-md-6">
                    <h5 class="mb-4">–ù–∞–≤–∏–≥–∞—Ü–∏—è</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="{% url 'home' %}" class="text-white text-decoration-none">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li class="mb-2"><a href="{% url 'biography' %}" class="text-white text-decoration-none">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</a></li>
                        <li class="mb-2"><a href="{% url 'picture_list' %}" class="text-white text-decoration-none">–ö–∞—Ä—Ç–∏–Ω—ã</a></li>
                        <li class="mb-2"><a href="{% url 'album_list' %}" class="text-white text-decoration-none">–ê–ª—å–±–æ–º—ã</a></li>
                        <li class="mb-2"><a href="{% url 'book_list' %}" class="text-white text-decoration-none">–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞</a></li>
                        <li class="mb-2"><a href="{% url 'news_list' %}" class="text-white text-decoration-none">–ù–æ–≤–æ—Å—Ç–∏</a></li>
                     </ul>
                </div>
                <div class="col-lg-3 col-md-6">
                    <h5 class="mb-4">–ö–æ–Ω—Ç–∞–∫—Ç—ã</h5>
                    <ul class="list-unstyled">
                        <li class="mb-2"><i class="bi bi-geo-alt me-2"></i>–¢–∞—à–∫–µ–Ω—Ç, –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</li>
                        <li class="mb-2"><i class="bi bi-envelope me-2"></i>alishermirzowork@gmail.com</li>
                    </ul>
                </div>
            </div>
            <hr class="my-4">
            <div class="row">
                <div class="col-md-6 text-center text-md-start">
                    <p class="mb-0">&copy; 2025 –ê–ª–∏—à–µ—Ä –ú–∏—Ä–∑–æ. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
                </div>
                <div class="col-md-6 text-center text-md-end">
                    <ul class="list-unstyled">
                        <li class="mb-2"><a href="{% url 'comfidence' %}" class="text-white text-decoration-none">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </footer>

<script src="{% static 'js/picture_js/picture.js' %}"></script>
</body>
</html>
